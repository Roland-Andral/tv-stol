<script>
async function updateTV() {
    try {
        const res = await fetch('https://script.google.com/macros/s/AKfycbzETiWv_Vy_GB_dkXZtKm9pkvcDl7uRIBj8ilzMMRkjWEczZlmOZ-5WRnlltC9DsDL9RA/exec?cache=' + Date.now());
        const data = await res.json();

        const container = document.getElementById('tv-container');

        if(data.type === 'message') {
            container.innerHTML = `<div style="font-size:50px; text-align:center; margin-top:20%;">${data.value}</div>`;
        } else if(data.type === 'url') {
            container.innerHTML = `<iframe src="${data.value}" style="width:100%; height:100%; border:none;"></iframe>`;
        } else {
            container.innerHTML = `<div style="color:red;">Type inconnu</div>`;
        }
    } catch(err) {
        console.error(err);
        document.getElementById('tv-container').innerHTML = `<div style="color:red;">Erreur: ${err}</div>`;
    }
}

// Rafraîchir toutes les 5 secondes pour suivre les mises à jour
setInterval(updateTV, 5000);
updateTV();
</script>

<body>
    <div id="tv-container" style="width:100%; height:100%; background:black;"></div>
</body>
